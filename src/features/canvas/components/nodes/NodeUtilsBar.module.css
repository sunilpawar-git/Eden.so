/**
 * NodeUtilsBar Styles — Pill bar tucked behind node
 * Slides out on hover with intent delay; uses design tokens only
 * Visibility driven by parent data-bar-proximity / data-bar-focused attributes
 */

.barWrapper {
    display: contents;
}

.container {
    position: absolute;
    top: 50%;
    right: 0;
    transform: translateY(-50%) translateX(calc(100% - var(--node-utils-bar-peek)));
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
    padding: var(--space-xs);
    background: var(--color-surface-elevated);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-full);
    box-shadow: var(--card-shadow);
    opacity: 0;
    visibility: hidden;
    z-index: -1;
    pointer-events: none;
    transition:
        opacity 200ms cubic-bezier(0.4, 0, 0.2, 1) var(--node-utils-hover-delay-out),
        transform 200ms cubic-bezier(0.4, 0, 0.2, 1) var(--node-utils-hover-delay-out),
        visibility 0s linear calc(200ms + var(--node-utils-hover-delay-out)),
        z-index 0s linear calc(200ms + var(--node-utils-hover-delay-out)),
        box-shadow 200ms ease;
}

/* Slide out when parent has data-bar-proximity="near" or data-bar-focused="true" */
:global([data-bar-proximity="near"]) .container,
:global([data-bar-focused="true"]) .container {
    opacity: 1;
    visibility: visible;
    transform: translateY(-50%) translateX(100%);
    z-index: var(--z-dropdown);
    pointer-events: auto;
    box-shadow: var(--card-shadow-hover);
    transition:
        opacity 200ms cubic-bezier(0.4, 0, 0.2, 1) var(--node-utils-hover-delay-in),
        transform 220ms cubic-bezier(0.34, 1.56, 0.64, 1) var(--node-utils-hover-delay-in),
        visibility 0s linear 0s,
        z-index 0s linear 0s,
        box-shadow 200ms ease;
}

/* Left-side variant: slide out to the left when near viewport right edge */
:global([data-bar-placement="left"]) .container {
    right: auto;
    left: 0;
    transform: translateY(-50%) translateX(calc(-100% + var(--node-utils-bar-peek)));
}

:global([data-bar-placement="left"][data-bar-proximity="near"]) .container,
:global([data-bar-placement="left"][data-bar-focused="true"]) .container {
    transform: translateY(-50%) translateX(-100%);
}

/* Pinned-open state: same as visible but no transition delay */
.containerPinnedOpen {
    opacity: 1;
    visibility: visible;
    transform: translateY(-50%) translateX(100%);
    z-index: var(--z-dropdown);
    pointer-events: auto;
    box-shadow: var(--card-shadow-hover);
    transition: none;
}

:global([data-bar-placement="left"]) .containerPinnedOpen {
    transform: translateY(-50%) translateX(-100%);
}

/* Left-side peek indicator */
:global([data-bar-placement="left"]) .peekIndicator {
    right: auto;
    left: calc(-1 * var(--node-utils-bar-peek));
    border-radius: var(--radius-sm) 0 0 var(--radius-sm);
}

/* Peek indicator — subtle colored sliver on node's right edge */
.peekIndicator {
    position: absolute;
    top: 50%;
    right: calc(-1 * var(--node-utils-bar-peek));
    transform: translateY(-50%);
    width: var(--node-utils-bar-peek);
    height: var(--node-utils-peek-height);
    background: var(--color-primary);
    border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
    opacity: 0.4;
    transition: opacity var(--transition-normal);
    z-index: 1;
    pointer-events: none;
    animation: peekPulse 2.5s ease-in-out infinite;
}

@keyframes peekPulse {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 0.6; }
}

/* Button styles (.actionButton, .deleteButton, .icon) are in TooltipButton.module.css */
