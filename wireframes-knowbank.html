<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Knowledge Bank ‚Äî Wireframes</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #0a0a0f; color: #e0e0e0; padding: 40px; }
  h1 { font-size: 28px; margin-bottom: 8px; color: #fff; }
  h2 { font-size: 20px; margin: 48px 0 16px; color: #a78bfa; border-bottom: 1px solid #2a2a3a; padding-bottom: 8px; }
  h3 { font-size: 14px; color: #888; margin-bottom: 16px; font-weight: 400; }
  .subtitle { color: #888; margin-bottom: 40px; }

  /* Wireframe container */
  .wireframe {
    background: #12121a;
    border: 1px solid #2a2a3a;
    border-radius: 12px;
    padding: 24px;
    margin-bottom: 32px;
    position: relative;
  }
  .wireframe-label {
    position: absolute; top: -10px; left: 16px;
    background: #a78bfa; color: #000; font-size: 11px; font-weight: 600;
    padding: 2px 10px; border-radius: 4px;
  }

  /* ============ WIREFRAME 1: TOP TOOLBAR ============ */
  .toolbar {
    display: flex; align-items: center; gap: 12px;
    background: #1a1a2e; border: 1px solid #333; border-radius: 8px;
    padding: 8px 16px; height: 48px;
  }
  .toolbar-btn {
    width: 36px; height: 36px; border-radius: 8px;
    display: flex; align-items: center; justify-content: center;
    font-size: 18px; cursor: pointer; position: relative;
    transition: all 0.2s;
  }
  .toolbar-btn.clip {
    background: linear-gradient(135deg, #7c3aed, #a78bfa);
    border: none; color: #fff;
  }
  .toolbar-btn.clip:hover { transform: scale(1.05); }
  .toolbar-btn .badge {
    position: absolute; top: -4px; right: -4px;
    background: #ef4444; color: #fff; font-size: 10px;
    width: 18px; height: 18px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-weight: 700;
  }
  .search-bar {
    flex: 1; max-width: 320px; height: 36px;
    background: #0f0f1a; border: 1px solid #333; border-radius: 8px;
    display: flex; align-items: center; padding: 0 12px; gap: 8px;
    color: #666; font-size: 14px;
  }
  .workspace-controls {
    display: flex; gap: 6px; margin-left: auto;
  }
  .workspace-controls .ctrl-btn {
    width: 32px; height: 32px; border-radius: 6px;
    background: #1e1e2e; border: 1px solid #333;
    display: flex; align-items: center; justify-content: center;
    font-size: 14px; color: #888;
  }
  .sync-status { font-size: 12px; color: #4ade80; margin-left: 8px; }
  .new-indicator {
    position: absolute; top: -20px; left: 0;
    font-size: 11px; color: #4ade80; font-weight: 600;
    animation: pulse 2s infinite;
  }
  @keyframes pulse { 0%,100% { opacity: 1; } 50% { opacity: 0.5; } }

  /* ============ WIREFRAME 2: DROPDOWN MENU ============ */
  .dropdown {
    width: 220px; background: #1e1e2e; border: 1px solid #333;
    border-radius: 10px; padding: 6px; margin-top: 8px;
    box-shadow: 0 8px 32px rgba(0,0,0,0.5);
  }
  .dropdown-item {
    display: flex; align-items: center; gap: 10px;
    padding: 10px 12px; border-radius: 8px; cursor: pointer;
    font-size: 14px; color: #e0e0e0;
    transition: background 0.15s;
  }
  .dropdown-item:hover { background: #2a2a3e; }
  .dropdown-item .icon { font-size: 16px; width: 24px; text-align: center; }
  .dropdown-divider { height: 1px; background: #333; margin: 4px 8px; }
  .dropdown-item.view { color: #a78bfa; }

  /* ============ WIREFRAME 3: PASTE TEXT MODAL ============ */
  .modal-overlay {
    background: rgba(0,0,0,0.6); border-radius: 12px;
    padding: 40px; display: flex; align-items: center; justify-content: center;
  }
  .modal {
    width: 480px; background: #1a1a2e; border: 1px solid #333;
    border-radius: 12px; overflow: hidden;
  }
  .modal-header {
    display: flex; justify-content: space-between; align-items: center;
    padding: 16px 20px; border-bottom: 1px solid #2a2a3a;
  }
  .modal-header h4 { font-size: 16px; color: #fff; }
  .modal-close {
    width: 28px; height: 28px; border-radius: 6px; border: none;
    background: #2a2a3a; color: #888; font-size: 16px; cursor: pointer;
  }
  .modal-body { padding: 20px; }
  .modal-input {
    width: 100%; height: 36px; background: #0f0f1a; border: 1px solid #333;
    border-radius: 8px; padding: 0 12px; color: #e0e0e0; font-size: 14px;
    margin-bottom: 12px;
  }
  .modal-textarea {
    width: 100%; height: 160px; background: #0f0f1a; border: 1px solid #333;
    border-radius: 8px; padding: 12px; color: #e0e0e0; font-size: 14px;
    resize: none; font-family: inherit;
  }
  .char-count { text-align: right; font-size: 12px; color: #666; margin-top: 4px; }
  .modal-footer {
    display: flex; justify-content: flex-end; gap: 8px;
    padding: 16px 20px; border-top: 1px solid #2a2a3a;
  }
  .btn { padding: 8px 20px; border-radius: 8px; font-size: 14px; cursor: pointer; border: none; }
  .btn-cancel { background: #2a2a3a; color: #888; }
  .btn-save { background: linear-gradient(135deg, #7c3aed, #a78bfa); color: #fff; font-weight: 600; }

  /* ============ WIREFRAME 4: SLIDE-OUT PANEL ============ */
  .app-layout {
    display: flex; height: 500px; border: 1px solid #333; border-radius: 12px; overflow: hidden;
  }
  .slide-panel {
    width: 340px; background: #14141e; border-right: 1px solid #2a2a3a;
    display: flex; flex-direction: column; flex-shrink: 0;
  }
  .panel-header {
    display: flex; justify-content: space-between; align-items: center;
    padding: 16px 20px; border-bottom: 1px solid #2a2a3a;
  }
  .panel-header h4 { font-size: 16px; color: #fff; display: flex; align-items: center; gap: 8px; }
  .panel-entries { flex: 1; overflow-y: auto; padding: 12px; }

  /* Entry Card */
  .entry-card {
    background: #1a1a2e; border: 1px solid #2a2a3a; border-radius: 10px;
    padding: 14px; margin-bottom: 10px; transition: border-color 0.2s;
  }
  .entry-card:hover { border-color: #444; }
  .entry-card-header {
    display: flex; align-items: center; gap: 8px; margin-bottom: 8px;
  }
  .entry-type-icon {
    width: 28px; height: 28px; border-radius: 6px;
    display: flex; align-items: center; justify-content: center;
    font-size: 14px;
  }
  .entry-type-icon.text { background: #1e3a5f; color: #60a5fa; }
  .entry-type-icon.image { background: #3a1e5f; color: #c084fc; }
  .entry-title { font-size: 14px; font-weight: 600; color: #e0e0e0; flex: 1; }
  .entry-toggle {
    width: 36px; height: 20px; border-radius: 10px;
    position: relative; cursor: pointer;
  }
  .entry-toggle.on { background: #4ade80; }
  .entry-toggle.off { background: #333; }
  .entry-toggle .knob {
    width: 16px; height: 16px; border-radius: 50%; background: #fff;
    position: absolute; top: 2px; transition: left 0.2s;
  }
  .entry-toggle.on .knob { left: 18px; }
  .entry-toggle.off .knob { left: 2px; }
  .entry-preview {
    font-size: 12px; color: #888; line-height: 1.5;
    overflow: hidden; display: -webkit-box;
    -webkit-line-clamp: 2; -webkit-box-orient: vertical;
  }
  .entry-actions {
    display: flex; gap: 4px; margin-top: 8px;
  }
  .entry-action-btn {
    font-size: 11px; color: #666; background: #1e1e2e; border: 1px solid #2a2a3a;
    padding: 4px 10px; border-radius: 4px; cursor: pointer;
  }
  .entry-action-btn.delete { color: #ef4444; border-color: #3a1e1e; }
  .entry-action-btn:hover { background: #2a2a3e; }

  /* Canvas placeholder */
  .canvas-area {
    flex: 1; background: #0a0a12; display: flex; align-items: center; justify-content: center;
    position: relative;
  }
  .canvas-area .node-placeholder {
    width: 200px; height: 120px; background: #1a1a2e; border: 1px solid #333;
    border-radius: 8px; padding: 12px; position: absolute;
  }
  .canvas-area .node-placeholder .node-heading {
    font-size: 11px; color: #a78bfa; margin-bottom: 6px; font-weight: 600;
  }
  .canvas-area .node-placeholder .node-content {
    font-size: 10px; color: #666; line-height: 1.4;
  }
  .canvas-grid {
    position: absolute; inset: 0;
    background-image: radial-gradient(circle, #1a1a2a 1px, transparent 1px);
    background-size: 24px 24px;
  }

  /* ============ WIREFRAME 5: ENTRY EDITOR (INLINE) ============ */
  .entry-card.editing { border-color: #7c3aed; }
  .entry-edit-input {
    width: 100%; height: 28px; background: #0f0f1a; border: 1px solid #444;
    border-radius: 6px; padding: 0 8px; color: #e0e0e0; font-size: 13px;
    margin-bottom: 8px;
  }
  .entry-edit-textarea {
    width: 100%; height: 80px; background: #0f0f1a; border: 1px solid #444;
    border-radius: 6px; padding: 8px; color: #e0e0e0; font-size: 12px;
    resize: none; font-family: inherit;
  }
  .entry-edit-actions {
    display: flex; justify-content: flex-end; gap: 6px; margin-top: 8px;
  }
  .entry-edit-btn {
    font-size: 12px; padding: 4px 14px; border-radius: 6px; cursor: pointer; border: none;
  }
  .entry-edit-btn.cancel { background: #2a2a3a; color: #888; }
  .entry-edit-btn.save { background: #7c3aed; color: #fff; }

  /* ============ WIREFRAME 6: AI CONTEXT FLOW ============ */
  .flow-diagram {
    display: flex; align-items: center; gap: 12px; flex-wrap: wrap;
    justify-content: center; padding: 20px;
  }
  .flow-box {
    padding: 12px 16px; border-radius: 8px; font-size: 12px;
    text-align: center; min-width: 120px;
  }
  .flow-box.kb { background: #1e3a5f; border: 1px solid #3b82f6; color: #93c5fd; }
  .flow-box.nodes { background: #1e4a2e; border: 1px solid #4ade80; color: #86efac; }
  .flow-box.prompt { background: #3a1e5f; border: 1px solid #a78bfa; color: #c4b5fd; }
  .flow-box.ai { background: #5f3a1e; border: 1px solid #f59e0b; color: #fcd34d; }
  .flow-arrow { font-size: 18px; color: #444; }
  .flow-box .label { font-weight: 600; margin-bottom: 4px; }
  .flow-box .detail { font-size: 10px; opacity: 0.7; }

  /* ============ ANNOTATIONS ============ */
  .annotation {
    font-size: 11px; color: #f59e0b; font-style: italic;
    margin-top: 8px; padding-left: 8px;
    border-left: 2px solid #f59e0b33;
  }
  .phase-tag {
    display: inline-block; font-size: 10px; font-weight: 600;
    padding: 2px 8px; border-radius: 4px; margin-left: 8px;
  }
  .phase-tag.p1 { background: #1e3a5f; color: #60a5fa; }
  .phase-tag.p2 { background: #1e4a2e; color: #4ade80; }
  .phase-tag.p3 { background: #3a1e5f; color: #a78bfa; }
  .phase-tag.p4 { background: #5f3a1e; color: #f59e0b; }
  .phase-tag.p5 { background: #5f1e1e; color: #f87171; }
</style>
</head>
<body>

<h1>Knowledge Bank ‚Äî UI Wireframes</h1>
<p class="subtitle">All planned UI implementations for feature/knowbank</p>

<!-- ==================== WIREFRAME 1: TOP TOOLBAR ==================== -->
<h2>1. Top Toolbar ‚Äî Add Button Placement <span class="phase-tag p3">Phase 3</span></h2>
<h3>Clip icon (üìé) added to the LEFT of SearchBar. Badge shows active entry count.</h3>

<div class="wireframe">
  <span class="wireframe-label">TOOLBAR</span>
  <div class="toolbar">
    <div class="toolbar-btn clip" style="position: relative;">
      <span class="new-indicator">‚Üê NEW</span>
      üìé
      <span class="badge">3</span>
    </div>
    <div class="search-bar">
      üîç <span>Search notes...</span>
    </div>
    <div class="workspace-controls">
      <div class="ctrl-btn">+</div>
      <div class="ctrl-btn">‚äû</div>
      <div class="ctrl-btn">üóë</div>
    </div>
    <span class="sync-status">‚óè Synced</span>
  </div>
  <div class="annotation">üìé button left of search bar. Badge "3" = 3 active Knowledge Bank entries. Click opens dropdown.</div>
</div>

<!-- ==================== WIREFRAME 2: DROPDOWN MENU ==================== -->
<h2>2. Add Button Dropdown Menu <span class="phase-tag p3">Phase 3</span></h2>
<h3>Click the üìé button to see upload options + panel access.</h3>

<div class="wireframe" style="display: flex; gap: 24px; align-items: flex-start;">
  <span class="wireframe-label">DROPDOWN</span>
  <div>
    <div class="toolbar" style="width: 300px;">
      <div class="toolbar-btn clip" style="background: #5b21b6;">üìé<span class="badge">3</span></div>
      <div class="search-bar" style="flex: 1;">üîç Search notes...</div>
    </div>
    <div style="margin-left: 0; margin-top: 4px;">
      <div class="dropdown">
        <div class="dropdown-item">
          <span class="icon">üìÑ</span> Upload File
        </div>
        <div class="dropdown-item">
          <span class="icon">üìù</span> Add Text
        </div>
        <div class="dropdown-divider"></div>
        <div class="dropdown-item view">
          <span class="icon">üìö</span> View Knowledge Bank (3)
        </div>
      </div>
    </div>
  </div>
  <div style="font-size: 12px; color: #888; max-width: 260px; margin-top: 16px;">
    <p><strong style="color: #e0e0e0;">Upload File</strong> ‚Üí opens native file picker<br>Accepts: .txt, .md, .json, .png, .jpg, .jpeg</p>
    <br>
    <p><strong style="color: #e0e0e0;">Add Text</strong> ‚Üí opens modal (see wireframe 3)</p>
    <br>
    <p><strong style="color: #a78bfa;">View Knowledge Bank</strong> ‚Üí opens slide-out panel (see wireframe 4)</p>
  </div>
</div>

<!-- ==================== WIREFRAME 3: PASTE TEXT MODAL ==================== -->
<h2>3. Add Text Modal <span class="phase-tag p3">Phase 3</span></h2>
<h3>Simple modal for typing/pasting text entries. Title + content + character count.</h3>

<div class="wireframe">
  <span class="wireframe-label">MODAL</span>
  <div class="modal-overlay">
    <div class="modal">
      <div class="modal-header">
        <h4>Add Text to Knowledge Bank</h4>
        <button class="modal-close">‚úï</button>
      </div>
      <div class="modal-body">
        <input class="modal-input" type="text" value="Guest List & Preferences" readonly>
        <textarea class="modal-textarea" readonly>30 families attending with kids ages 5-12
Vegetarian food only, North Indian cuisine
Theme: Traditional + Modern Fusion
Budget: $2,000 total
No alcohol, kid-safe activities
Noise restrictions after 10 PM</textarea>
        <div class="char-count">247 / 10,000</div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-cancel">Cancel</button>
        <button class="btn btn-save">Save to Knowledge Bank</button>
      </div>
    </div>
  </div>
  <div class="annotation">Title field (required) + textarea with 10,000 char limit. All strings from string resources.</div>
</div>

<!-- ==================== WIREFRAME 4: SLIDE-OUT PANEL ==================== -->
<h2>4. Knowledge Bank Slide-Out Panel <span class="phase-tag p4">Phase 4</span></h2>
<h3>Slides from left edge. Shows all entries with toggle, edit, delete controls. Canvas remains visible.</h3>

<div class="wireframe">
  <span class="wireframe-label">PANEL + CANVAS</span>
  <div class="app-layout">
    <!-- Slide-out Panel -->
    <div class="slide-panel">
      <div class="panel-header">
        <h4>üìö Knowledge Bank</h4>
        <button class="modal-close" style="width: 24px; height: 24px; font-size: 14px;">‚úï</button>
      </div>
      <div class="panel-entries">
        <!-- Entry 1: Text -->
        <div class="entry-card">
          <div class="entry-card-header">
            <div class="entry-type-icon text">üìÑ</div>
            <span class="entry-title">Guest List & Preferences</span>
            <div class="entry-toggle on"><div class="knob"></div></div>
          </div>
          <div class="entry-preview">30 families attending with kids ages 5-12. Vegetarian food only, North Indian cuisine. Theme: Traditional + Modern...</div>
          <div class="entry-actions">
            <button class="entry-action-btn">Edit</button>
            <button class="entry-action-btn delete">Delete</button>
          </div>
        </div>
        <!-- Entry 2: Image -->
        <div class="entry-card">
          <div class="entry-card-header">
            <div class="entry-type-icon image">üñºÔ∏è</div>
            <span class="entry-title">Venue Photo</span>
            <div class="entry-toggle on"><div class="knob"></div></div>
          </div>
          <div class="entry-preview">A spacious community hall with white walls, wooden floor, stage area on the right side. Capacity ~100 people. Natural lighting from large windows...</div>
          <div class="entry-actions">
            <button class="entry-action-btn">Edit</button>
            <button class="entry-action-btn delete">Delete</button>
          </div>
        </div>
        <!-- Entry 3: Text (disabled) -->
        <div class="entry-card" style="opacity: 0.5;">
          <div class="entry-card-header">
            <div class="entry-type-icon text">üìÑ</div>
            <span class="entry-title">Old Budget Draft</span>
            <div class="entry-toggle off"><div class="knob"></div></div>
          </div>
          <div class="entry-preview">Initial budget estimate from Jan 2026. Budget: $1,500. Note: outdated, use updated budget instead...</div>
          <div class="entry-actions">
            <button class="entry-action-btn">Edit</button>
            <button class="entry-action-btn delete">Delete</button>
          </div>
        </div>
        <!-- Entry 4: Text -->
        <div class="entry-card">
          <div class="entry-card-header">
            <div class="entry-type-icon text">üìÑ</div>
            <span class="entry-title">Music Preferences</span>
            <div class="entry-toggle on"><div class="knob"></div></div>
          </div>
          <div class="entry-preview">Mix of Bollywood and folk songs. Energetic for day, mellow for evening. No explicit lyrics. Must include: Rang Barse, Balam Pichkari...</div>
          <div class="entry-actions">
            <button class="entry-action-btn">Edit</button>
            <button class="entry-action-btn delete">Delete</button>
          </div>
        </div>
      </div>
    </div>
    <!-- Canvas Area -->
    <div class="canvas-area">
      <div class="canvas-grid"></div>
      <div class="node-placeholder" style="top: 40px; left: 40px;">
        <div class="node-heading">Song Playlist</div>
        <div class="node-content">Generate a playlist of 10 songs for Holi celebration...</div>
      </div>
      <div class="node-placeholder" style="top: 180px; left: 280px;">
        <div class="node-heading">Decoration Ideas</div>
        <div class="node-content">Suggest decoration themes combining traditional...</div>
      </div>
      <div class="node-placeholder" style="top: 60px; left: 320px; width: 180px; height: 80px;">
        <div class="node-heading">Menu Plan</div>
        <div class="node-content">North Indian vegetarian menu for 30 families...</div>
      </div>
    </div>
  </div>
  <div class="annotation">
    Panel slides from left ‚Äî non-blocking. Canvas nodes are visible alongside.
    Disabled entry (Old Budget Draft) shown at 50% opacity.
    Image entry shows AI-generated text description.
  </div>
</div>

<!-- ==================== WIREFRAME 5: INLINE EDITOR ==================== -->
<h2>5. Entry Inline Editor <span class="phase-tag p4">Phase 4</span></h2>
<h3>Click "Edit" on an entry card to edit title and content inline.</h3>

<div class="wireframe" style="max-width: 360px;">
  <span class="wireframe-label">EDIT MODE</span>
  <div class="entry-card editing">
    <div class="entry-card-header">
      <div class="entry-type-icon text">üìÑ</div>
      <span class="entry-title" style="color: #a78bfa; font-size: 12px;">Editing...</span>
    </div>
    <input class="entry-edit-input" type="text" value="Guest List & Preferences" readonly>
    <textarea class="entry-edit-textarea" readonly>30 families attending with kids ages 5-12
Vegetarian food only, North Indian cuisine
Theme: Traditional + Modern Fusion
Budget: $2,000 total
No alcohol, kid-safe activities</textarea>
    <div class="char-count" style="font-size: 11px;">247 / 10,000</div>
    <div class="entry-edit-actions">
      <button class="entry-edit-btn cancel">Cancel</button>
      <button class="entry-edit-btn save">Save</button>
    </div>
  </div>
  <div class="annotation">Purple border indicates edit mode. Save persists to Firestore. Cancel reverts changes.</div>
</div>

<!-- ==================== WIREFRAME 6: EMPTY STATE ==================== -->
<h2>6. Empty State (No Entries) <span class="phase-tag p4">Phase 4</span></h2>
<h3>When workspace has no Knowledge Bank entries yet.</h3>

<div class="wireframe" style="max-width: 360px;">
  <span class="wireframe-label">EMPTY STATE</span>
  <div style="padding: 40px 20px; text-align: center;">
    <div style="font-size: 40px; margin-bottom: 16px; opacity: 0.3;">üìö</div>
    <div style="font-size: 14px; color: #888; margin-bottom: 8px;">No entries yet</div>
    <div style="font-size: 12px; color: #555; line-height: 1.6; max-width: 240px; margin: 0 auto;">
      Add text or files to your Knowledge Bank. All AI-generated nodes will use this context automatically.
    </div>
    <button class="btn btn-save" style="margin-top: 20px; font-size: 13px;">
      üìé Add First Entry
    </button>
  </div>
  <div class="annotation">Shown in panel when no entries exist. CTA button triggers add dropdown.</div>
</div>

<!-- ==================== WIREFRAME 7: AI CONTEXT FLOW ==================== -->
<h2>7. AI Context Injection Flow <span class="phase-tag p2">Phase 2</span></h2>
<h3>How Knowledge Bank context flows into AI generation and transform operations.</h3>

<div class="wireframe">
  <span class="wireframe-label">CONTEXT FLOW</span>

  <!-- Generation Flow -->
  <div style="margin-bottom: 24px;">
    <div style="font-size: 12px; color: #4ade80; font-weight: 600; margin-bottom: 12px;">AI GENERATION FLOW</div>
    <div class="flow-diagram">
      <div class="flow-box kb">
        <div class="label">üìö Knowledge Bank</div>
        <div class="detail">Enabled entries only</div>
      </div>
      <span class="flow-arrow">+</span>
      <div class="flow-box nodes">
        <div class="label">üîó Node Chain</div>
        <div class="detail">Upstream connections</div>
      </div>
      <span class="flow-arrow">+</span>
      <div class="flow-box prompt">
        <div class="label">‚úèÔ∏è User Prompt</div>
        <div class="detail">Node heading text</div>
      </div>
      <span class="flow-arrow">‚Üí</span>
      <div class="flow-box ai">
        <div class="label">ü§ñ Gemini API</div>
        <div class="detail">Combined context</div>
      </div>
    </div>
  </div>

  <!-- Transform Flow -->
  <div>
    <div style="font-size: 12px; color: #60a5fa; font-weight: 600; margin-bottom: 12px;">AI TRANSFORM FLOW</div>
    <div class="flow-diagram">
      <div class="flow-box kb">
        <div class="label">üìö Knowledge Bank</div>
        <div class="detail">Enabled entries only</div>
      </div>
      <span class="flow-arrow">+</span>
      <div class="flow-box nodes" style="background: #2a1e4a; border-color: #a78bfa; color: #c4b5fd;">
        <div class="label">‚ú® Transform Type</div>
        <div class="detail">Refine / Shorten / etc.</div>
      </div>
      <span class="flow-arrow">+</span>
      <div class="flow-box prompt" style="background: #1e4a2e; border-color: #4ade80; color: #86efac;">
        <div class="label">üìù Existing Content</div>
        <div class="detail">Node output text</div>
      </div>
      <span class="flow-arrow">‚Üí</span>
      <div class="flow-box ai">
        <div class="label">ü§ñ Gemini API</div>
        <div class="detail">Context-aware transform</div>
      </div>
    </div>
  </div>
  <div class="annotation">
    Knowledge Bank context is PREPENDED to both flows. Token budget: max 3000 tokens for KB context.
    If no entries enabled, KB section is omitted (zero overhead).
  </div>
</div>

<!-- ==================== WIREFRAME 8: IMAGE UPLOAD FLOW ==================== -->
<h2>8. Image Upload & Compression Flow <span class="phase-tag p3">Phase 3</span></h2>
<h3>Images are compressed client-side, uploaded to Firebase Storage, then described via Gemini Vision.</h3>

<div class="wireframe">
  <span class="wireframe-label">IMAGE FLOW</span>
  <div class="flow-diagram">
    <div class="flow-box" style="background: #2a2a3e; border: 1px solid #555; color: #e0e0e0;">
      <div class="label">üì∑ User Image</div>
      <div class="detail">Original: ~5MB</div>
    </div>
    <span class="flow-arrow">‚Üí</span>
    <div class="flow-box" style="background: #1e3a3a; border: 1px solid #2dd4bf; color: #5eead4;">
      <div class="label">üóúÔ∏è Compress</div>
      <div class="detail">Max 1024px, JPEG 0.7</div>
      <div class="detail">~100-200KB</div>
    </div>
    <span class="flow-arrow">‚Üí</span>
    <div class="flow-box" style="background: #3a2a1e; border: 1px solid #f59e0b; color: #fcd34d;">
      <div class="label">‚òÅÔ∏è Firebase Storage</div>
      <div class="detail">Store compressed file</div>
    </div>
    <span class="flow-arrow">‚Üí</span>
    <div class="flow-box ai">
      <div class="label">üëÅÔ∏è Gemini Vision</div>
      <div class="detail">Auto-describe image</div>
    </div>
    <span class="flow-arrow">‚Üí</span>
    <div class="flow-box kb">
      <div class="label">üìö KB Entry</div>
      <div class="detail">URL + text description</div>
    </div>
  </div>
  <div class="annotation">
    Client-side compression (Canvas API) reduces token cost significantly.
    Text description is what gets injected into AI prompts ‚Äî not the image itself.
  </div>
</div>

<!-- ==================== WIREFRAME 9: MAX ENTRIES STATE ==================== -->
<h2>9. Max Entries Reached State <span class="phase-tag p3">Phase 3</span></h2>
<h3>When 20/20 entries are used, the add button shows a warning.</h3>

<div class="wireframe" style="display: flex; gap: 24px; align-items: flex-start;">
  <span class="wireframe-label">MAX LIMIT</span>
  <div>
    <div class="toolbar" style="width: 300px;">
      <div class="toolbar-btn clip" style="background: #555; cursor: not-allowed; opacity: 0.6;">
        üìé<span class="badge" style="background: #888;">20</span>
      </div>
      <div class="search-bar" style="flex: 1;">üîç Search notes...</div>
    </div>
    <div style="margin-left: 0; margin-top: 4px;">
      <div class="dropdown" style="width: 240px;">
        <div class="dropdown-item" style="color: #888; cursor: not-allowed;">
          <span class="icon">‚ö†Ô∏è</span>
          <div>
            <div style="font-size: 13px;">Limit reached (20/20)</div>
            <div style="font-size: 11px; color: #666;">Delete an entry to add more</div>
          </div>
        </div>
        <div class="dropdown-divider"></div>
        <div class="dropdown-item view">
          <span class="icon">üìö</span> View Knowledge Bank (20)
        </div>
      </div>
    </div>
  </div>
  <div class="annotation" style="margin-top: 16px;">
    Upload/Paste options disabled. User must delete entries first.
    "View Knowledge Bank" still accessible.
  </div>
</div>

<!-- ==================== SUMMARY ==================== -->
<h2 style="color: #4ade80;">Implementation Summary</h2>
<div class="wireframe" style="padding: 24px;">
  <span class="wireframe-label">PHASES</span>
  <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 12px; text-align: center;">
    <div style="padding: 16px; background: #1e3a5f; border-radius: 8px;">
      <div style="font-size: 24px; margin-bottom: 8px;">üèóÔ∏è</div>
      <div style="font-size: 12px; font-weight: 600; color: #60a5fa;">Phase 1</div>
      <div style="font-size: 11px; color: #888; margin-top: 4px;">Types + Service<br>+ Store + Tests</div>
    </div>
    <div style="padding: 16px; background: #1e4a2e; border-radius: 8px;">
      <div style="font-size: 24px; margin-bottom: 8px;">ü§ñ</div>
      <div style="font-size: 12px; font-weight: 600; color: #4ade80;">Phase 2</div>
      <div style="font-size: 11px; color: #888; margin-top: 4px;">AI Integration<br>+ Context Builder</div>
    </div>
    <div style="padding: 16px; background: #3a1e5f; border-radius: 8px;">
      <div style="font-size: 24px; margin-bottom: 8px;">üìé</div>
      <div style="font-size: 12px; font-weight: 600; color: #a78bfa;">Phase 3</div>
      <div style="font-size: 11px; color: #888; margin-top: 4px;">Add Button<br>+ Upload + Compress</div>
    </div>
    <div style="padding: 16px; background: #5f3a1e; border-radius: 8px;">
      <div style="font-size: 24px; margin-bottom: 8px;">üìö</div>
      <div style="font-size: 12px; font-weight: 600; color: #f59e0b;">Phase 4</div>
      <div style="font-size: 11px; color: #888; margin-top: 4px;">Management<br>Panel + Editor</div>
    </div>
    <div style="padding: 16px; background: #5f1e1e; border-radius: 8px;">
      <div style="font-size: 24px; margin-bottom: 8px;">üîí</div>
      <div style="font-size: 12px; font-weight: 600; color: #f87171;">Phase 5</div>
      <div style="font-size: 11px; color: #888; margin-top: 4px;">Integration Tests<br>+ Security + Polish</div>
    </div>
  </div>
</div>

</body>
</html>
